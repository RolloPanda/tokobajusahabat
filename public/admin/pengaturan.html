    <!DOCTYPE html>
    <html lang="id">
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pengaturan Admin — Dashboard</title>
    <link rel="icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        html, body { font-family: system-ui, sans-serif; background: #f8f9fa; height:100%; }
        .navbar .btn-outline-primary { border-color: #8B004B; color: #8B004B; }
        .navbar .btn-outline-primary:hover { background-color: #8B004B; color: #fff; }
        .hero { background: linear-gradient(to right, #8B004B, #ad1457); color:#fff; padding:2rem 1rem; text-align:center; }
        .sidebar { background:#fff; border-right:1px solid #e5e5e5; height:calc(100vh - 56px - 64px); padding-top:1rem; }
        .sidebar a { color:#333; display:block; padding:.75rem 1.5rem; text-decoration:none; }
        .sidebar a.active, .sidebar a:hover { background:#f1f1f1; color:#8B004B; }
        .content { padding:2rem; }
        .card-setting { border-radius:1rem; box-shadow:0 .25rem .5rem rgba(0,0,0,0.08); border:none; }
        @media (max-width: 768px) {
        .content { padding:1rem; }
        .sidebar { display:none; }
        }
    </style>
    </head>
    <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container">
        <a class="navbar-brand fw-bold" href="dashboardadmin.html">Toko Baju Sahabat</a>
        <div class="d-flex align-items-center ms-auto" style="gap:.5rem;">
            <button id="logout" class="btn btn-outline-primary btn-sm">Logout</button>
        </div>
        </div>
    </nav>
    <!-- Hero -->
    <section class="hero">
        <h1>Pengaturan Admin</h1>
        <p>Kelola akun admin dan pengaturan keamanan akun Anda.</p>
    </section>
    <div class="container-fluid">
        <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 sidebar d-none d-md-block">
  <a href="dashboardadmin.html"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a>
  <a href="produkadmin.html" class="active"><i class="bi bi-tags me-2"></i>Kelola Produk</a>
  <a href="stok.html"><i class="bi bi-box-seam me-2"></i>Manajemen Stok</a>
  <a href="pembelian.html"><i class="bi bi-download me-2"></i>Pembelian (Barang Masuk)</a>
  <a href="penjualan.html"><i class="bi bi-upload me-2"></i>Penjualan (Barang Keluar)</a>
  <a href="offline.html"><i class="bi bi-shop me-2"></i>Penjualan Offline</a>
  <a href="kelolapesanan.html"><i class="bi bi-inboxes me-2"></i>Kelola Pesanan Online</a>
  <a href="laporan.html"><i class="bi bi-file-earmark-bar-graph me-2"></i>Laporan Stok</a>
  <!-- ✅ Menu baru ditambahkan di sini -->
  <a href="laporanpenjualan.html"><i class="bi bi-journal-text me-2"></i>Laporan Penjualan</a>
  <a href="grafik.html"><i class="bi bi-bar-chart me-2"></i>Grafik</a>
  <a href="pengaturan.html"><i class="bi bi-gear me-2"></i>Pengaturan Admin</a>
</nav>
        <!-- Main Content -->
        <main class="col-md-10 content">
            <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card card-setting p-4 mb-4">
                <h5 class="mb-3"><i class="bi bi-person-circle me-2"></i>Profil Admin</h5>
                <div id="profileInfo" class="mb-2">Memuat...</div>
                <button class="btn btn-outline-primary btn-sm mb-2" onclick="location.href='signupadmin.html'">
                    <i class="bi bi-person-plus"></i> Buat Akun Admin Baru
                </button>
                </div>
                <div class="card card-setting p-4">
                <h5 class="mb-3"><i class="bi bi-key me-2"></i>Ganti Password</h5>
                <form id="gantiPasswordForm" autocomplete="off">
                    <div class="mb-3">
                    <label for="passwordLama" class="form-label">Password Lama</label>
                    <input type="password" id="passwordLama" class="form-control" required autocomplete="off" />
                    </div>
                    <div class="mb-3">
                    <label for="passwordBaru" class="form-label">Password Baru</label>
                    <input type="password" id="passwordBaru" class="form-control" required minlength="6" autocomplete="off" />
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Simpan Perubahan</button>
                    <span id="pwResult" class="ms-2"></span>
                </form>
                </div>
            </div>
            </div>
        </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // --------- TOKEN CHECK ---------
        const token = localStorage.getItem('adminToken');
        if (!token) {
        alert('Silakan login terlebih dahulu!');
        location.href = 'loginadmin.html';
        }

        // --------- LOGOUT ---------
        document.getElementById('logout').onclick = () => {
        localStorage.removeItem('adminToken');
        window.location.href = 'loginadmin.html';
        };

        // --------- LOAD PROFIL ADMIN ---------
        async function loadProfile() {
        try {
            const res = await fetch('/api/admin/dashboard', {
            headers: { 'Authorization': 'Bearer ' + token }
            });
            if (!res.ok) throw new Error('Gagal load profil');
            const json = await res.json();
            document.getElementById('profileInfo').innerHTML =
            `<strong>Email:</strong> ${json.admin.email || '-'}<br>
            <strong>Role:</strong> ${json.admin.role || 'admin'}`;
        } catch (err) {
            document.getElementById('profileInfo').innerHTML = 'Gagal memuat profil admin.';
        }
        }
        loadProfile();

        // --------- GANTI PASSWORD ---------
        document.getElementById('gantiPasswordForm').onsubmit = async function(e) {
        e.preventDefault();
        const passwordLama = document.getElementById('passwordLama').value;
        const passwordBaru = document.getElementById('passwordBaru').value;
        const pwResult = document.getElementById('pwResult');
        pwResult.textContent = '';
        try {
            const res = await fetch('/api/admin/ubahpassword', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + token
            },
            body: JSON.stringify({ passwordLama, passwordBaru })
            });
            const json = await res.json();
            if (json.success) {
            pwResult.textContent = 'Password berhasil diubah!';
            pwResult.className = 'ms-2 text-success';
            document.getElementById('gantiPasswordForm').reset();
            } else {
            pwResult.textContent = json.message || 'Gagal mengubah password';
            pwResult.className = 'ms-2 text-danger';
            }
        } catch (err) {
            pwResult.textContent = 'Error: ' + err.message;
            pwResult.className = 'ms-2 text-danger';
        }
        };
    </script>
    </body>
    </html>
